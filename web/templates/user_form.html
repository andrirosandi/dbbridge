{{define "user_form"}}
<h2>{{if .IsEdit}}Edit{{else}}New{{end}} User</h2>
<form method="POST" action="/admin/users/save">
    {{if .IsEdit}}
    <input type="hidden" name="id" value="{{.User.ID}}">
    {{end}}

    <label for="username">Username</label>
    <input type="text" id="username" name="username" value="{{.User.Username}}" required>

    <label for="password">Password {{if .IsEdit}}<small>(Leave blank to keep existing)</small>{{end}}</label>
    <input type="password" id="password" name="password" {{if not .IsEdit}}required{{end}}>

    <div style="margin-top: 1rem;">
        <label for="is_active">
            <input type="checkbox" id="is_active" name="is_active" {{if or (not .IsEdit) .User.IsActive}}checked{{end}}>
            Active
        </label>
    </div>

    <div class="grid" style="margin-top: 2rem;">
        <button type="submit">Save User</button>
        <a href="/admin/users" role="button" class="secondary">Cancel</a>
        {{if .IsEdit}}
        <a href="/admin/users/delete?id={{.User.ID}}" role="button" class="contrast"
            onclick="return confirm('Are you sure? This user will not be able to login.')">Delete</a>
        {{end}}
    </div>
</form>
{{end}}